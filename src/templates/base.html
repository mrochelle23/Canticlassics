<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Base</title>
        <title>{% block title %}Canti Classics{% endblock %}</title>
        <link rel="stylesheet" href="/static/css/styles.css">
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <link rel="stylesheet grid-cell" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <style>

            .contact a:hover {
                color: #782F37;
                font-family: 'Old Standard TT', serif;
                font-weight: bold;
                font-size: large;
            }
        </style>
    </head>
    <header>
        <div class="navbar navbar-expand-lg navbar=light" style="background-color: white;">
            <div class="container" style="margin: 50px;">
                <button class="navbar-toggler" type="buttong" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ml-auto" >
                        <li class="nav-item active home">
                            <a class="nav-link" href="/">Home</a>
                        </li>
                        <li class="nav-item active events">
                            <a class="nav-link" href="/events">Events</a>
                        </li>
                        <li class="nav-item active recordings">
                            <a class="nav-link" href="/recordings">Recordings</a>
                        </li>
                        <li class="nav-item active artists">
                            <a class="nav-link" href="/artists">Artists</a>
                        </li>
                        <li class="nav-item active archives">
                            <a class="nav-link" href="/archives">Archives</a>
                        </li>
                        <li class="nav-item active about-us">
                            <a class="nav-link" href="/about">About Us</a>
                        </li>
                        <li class="nav-item active contact">
                            <a class="nav-link" href="#contact">Contact</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </header>

    <!-- This is where child templates inject their content -->
    <body class="base-body">
        <main>
            {% block content %}
            {% endblock %}
        </main>

        <footer id="contact" class="py-4">
            <div class="container">
                <div class="row justify-content-center">
                    <!-- Inquiry Form -->
                    <div class="col-md-6">
                        <h2 class="text-center mb-4">Have any questions for us?</h2>
                        <form action="/send_inquiry" method="POST">
                            <div class="form-group">
                                <input type="text" name="name" class="form-control" required placeholder="Name">
                            </div>
                            <div class="form-group">
                                <input type="email" name="email" class="form-control" required placeholder="Email">
                            </div>
                            <div class="form-group textarea-container">
                                <textarea class="form-control" name="message" id="message" required placeholder="Message" maxlength="500" oninput="updateCharacterCountAndResize()"></textarea>
                                <small id="charCount" class="char-counter">0 / 500</small>
                            </div>
                            <button type="submit">Send Message</button>
                        </form>
                    </div>
        
                    <!-- Contact Info & Social Media Links -->
                    <div class="col-md-6 text-left">
                        <h2>Or reach out to us directly:</h2>
                        <address>
                            <strong>Canti Classics</strong><br>
                            <strong>Email:</strong> info@canticlassics.com<br>
                            <strong>Phone:</strong> (773) 262-9655
                        </address>
        
                        <!-- Social Media Links directly under contact info -->
                        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
                        <div class="mt-3">
                            <a href="https://www.facebook.com/canticlassics"><i class="fa fa-facebook" style="color: white; font-size: 45px; margin-right: 10px;"></i></a>
                            <a href="https://www.instagram.com/canticlassics"><i class="fa fa-instagram" style="color: white; font-size: 45px; margin-right: 10px;"></i></a>
                            <a href="https://www.youtube.com/canticlassics1"><i class="fa fa-youtube-play" style="color: white; font-size: 45px;"></i></a>
                        </div>
                    </div>
                </div>
        
                <!-- Newsletter Section (Horizontal Layout) -->
                <div class="row justify-content-center mt-4">
                    <div class="col-md-8">
                        <h2 class="text-center">Join our newsletter</h2>
                        <form action="/add" method="POST" class="d-flex justify-content-center">
                            <input type="email" name="email2" class="form-control w-50 mr-2" required placeholder="Email">
                            <button type="submit">Sign Up</button>
                        </form>

                        <!-- Unsubscribe Button Below -->
                        <p class="text-center mt-3">
                            <a href="http://127.0.0.1:5000/unsubscribe?email={email}" 
                            style="color: lightgray; text-decoration: none; font-size: 16px;">
                                Unsubscribe
                            </a>
                        </p>
                    </div>
                </div>
        
                <!-- Footer Copyright -->
                <div class="text-center mt-3">
                    <p>&copy; 2025 Canti Classics. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </body>

    <!-- Bootstrap JS and jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.min.js"></script>

    <script>
        // Function to update character count and resize the textarea
        function updateCharacterCountAndResize() {
            var messageBox = document.getElementById("message");
            var charCount = document.getElementById("charCount");

            // Show the character counter when the user starts typing
            if (messageBox.value.length > 0) {
                charCount.style.display = "block";
            } else {
                charCount.style.display = "none";
            }

            // Update the character count
            charCount.textContent = messageBox.value.length + " / 500";

            // Resize the textarea based on the content
            messageBox.style.height = 'auto'; // Reset the height to auto
            messageBox.style.height = (messageBox.scrollHeight) + 'px'; // Set height based on content
        }

        window.addEventListener('DOMContentLoaded', (event) => {
        // Check if the page has been loaded with the #contact hash
        if (window.location.hash === "#contact") {
            // Remove the hash from the URL to prevent auto-scrolling
            history.replaceState(null, null, window.location.pathname);

            // Scroll to the footer smoothly after a slight delay
            setTimeout(function() {
                const footer = document.getElementById('contact');
                if (footer) {
                    // Custom smooth scroll function
                    smoothScrollTo(footer, 700); // 5000 is the duration in milliseconds (5 seconds)
                }
            }, 500);  // Delay scroll for 500ms after page load (adjust as necessary)
        }

        // Add event listener for the Contact button click
        const contactButton = document.querySelector('a[href="#contact"]');
        if (contactButton) {
            contactButton.addEventListener('click', function(event) {
                event.preventDefault(); // Prevent default action (jumping directly to the section)
                
                const footer = document.getElementById('contact');
                if (footer) {
                    smoothScrollTo(footer, 700); // Smooth scroll to the footer
                }
            });
        }
    });

    // Custom smooth scroll function
    function smoothScrollTo(target, duration) {
        const start = window.scrollY || window.pageYOffset;
        const end = target.getBoundingClientRect().top + start;
        const change = end - start;
        const startTime = performance.now();

        function animateScroll(currentTime) {
            const elapsedTime = currentTime - startTime;
            const progress = Math.min(elapsedTime / duration, 1);
            window.scrollTo(0, start + change * progress);

            if (elapsedTime < duration) {
                requestAnimationFrame(animateScroll);
            }
        }

        requestAnimationFrame(animateScroll);
    }
    </script>
</html>